{"version":3,"sources":["../../src/functions/contracts.ts"],"sourcesContent":["import type { CompiledContract } from \"@moonwall/types\";\nimport fs from \"node:fs\";\nimport path from \"node:path\";\nimport type { Abi } from \"viem\";\n\nexport function getAllCompiledContracts(contractsDir = \"./\", recurse = false): string[] {\n  const contractsPath = path.isAbsolute(contractsDir)\n    ? contractsDir\n    : path.join(process.cwd(), contractsDir);\n  const contracts = fs.readdirSync(contractsPath, { withFileTypes: true });\n\n  let contractNames: string[] = [];\n\n  for (const dirent of contracts) {\n    const fullDirentPath = path.join(contractsPath, dirent.name);\n\n    if (dirent.isDirectory() && recurse) {\n      contractNames = contractNames.concat(getAllCompiledContracts(fullDirentPath, recurse));\n    } else if (dirent.isFile() && path.extname(dirent.name) === \".json\") {\n      contractNames.push(path.basename(dirent.name, \".json\"));\n    }\n  }\n\n  return contractNames;\n}\n\nexport function getCompiled<TAbi extends Abi>(contractPath: string): CompiledContract<TAbi> {\n  const filePath = path.join(process.cwd(), `${contractPath}.json`);\n  if (!fs.existsSync(filePath)) {\n    throw new Error(`Contract name (${contractPath}) doesn't exist in test suite`);\n  }\n\n  try {\n    const json = fs.readFileSync(filePath, \"utf8\");\n    return JSON.parse(json);\n  } catch (e) {\n    throw new Error(\n      `Contract name ${contractPath} is not compiled. Please check compiled json exists`\n    );\n  }\n}\n"],"mappings":";AACA,OAAO,QAAQ;AACf,OAAO,UAAU;AAGV,SAAS,wBAAwB,eAAe,MAAM,UAAU,OAAiB;AACtF,QAAM,gBAAgB,KAAK,WAAW,YAAY,IAC9C,eACA,KAAK,KAAK,QAAQ,IAAI,GAAG,YAAY;AACzC,QAAM,YAAY,GAAG,YAAY,eAAe,EAAE,eAAe,KAAK,CAAC;AAEvE,MAAI,gBAA0B,CAAC;AAE/B,aAAW,UAAU,WAAW;AAC9B,UAAM,iBAAiB,KAAK,KAAK,eAAe,OAAO,IAAI;AAE3D,QAAI,OAAO,YAAY,KAAK,SAAS;AACnC,sBAAgB,cAAc,OAAO,wBAAwB,gBAAgB,OAAO,CAAC;AAAA,IACvF,WAAW,OAAO,OAAO,KAAK,KAAK,QAAQ,OAAO,IAAI,MAAM,SAAS;AACnE,oBAAc,KAAK,KAAK,SAAS,OAAO,MAAM,OAAO,CAAC;AAAA,IACxD;AAAA,EACF;AAEA,SAAO;AACT;AAEO,SAAS,YAA8B,cAA8C;AAC1F,QAAM,WAAW,KAAK,KAAK,QAAQ,IAAI,GAAG,GAAG,YAAY,OAAO;AAChE,MAAI,CAAC,GAAG,WAAW,QAAQ,GAAG;AAC5B,UAAM,IAAI,MAAM,kBAAkB,YAAY,+BAA+B;AAAA,EAC/E;AAEA,MAAI;AACF,UAAM,OAAO,GAAG,aAAa,UAAU,MAAM;AAC7C,WAAO,KAAK,MAAM,IAAI;AAAA,EACxB,SAAS,GAAG;AACV,UAAM,IAAI;AAAA,MACR,iBAAiB,YAAY;AAAA,IAC/B;AAAA,EACF;AACF;","names":[]}